Searching the pg_guyton database
==============================================================================

This is a Django project that provides a web interface for querying databases
that contain populations of virtual individuals generated by the Guyton model
(such as [this database](https://github.com/rma/pg_guyton)).

Prerequisite software:

* [Python](http://www.python.org/)
* [Django](https://www.djangoproject.com/)
* [Celery](http://celeryproject.org/)
* [RabbitMQ](http://www.rabbitmq.com/) (or any other message broker supported
  by `Celery`)

Notes
------------------------------------------------------------------------------

Private settings such as the details of the database connection, the message
broker and the `SECRET_KEY` are stored in `settings_private.py`. To prevent
git from tracking changes to this file (and inadvertantly recording your
settings) run the following command:

`git update-index --assume-unchanged settings_private.py`

To run this project via the built-in Django webserver (**not for use in a
production setting**), first ensure that the database is populated with the
necessary tables (`python manage.py syncdb`) and then run the following two
commands in parallel:

* `python manage.py celeryd -l info`
* `python manage.py runserver`

Configuring RabbitMQ
------------------------------------------------------------------------------

Having install RabbitMQ, a virtual host must be configured:

    # sudo rabbitmq
    # sudo rabbitmqctl add_user $RMQ_USER $RMQ_PWD
    # sudo rabbitmqctl add_vhost $RMQ_VHOST
    # sudo rabbitmqctl set_permissions -p $RMQ_VHOST $RMQ_USER ".*" ".*" ".*"
